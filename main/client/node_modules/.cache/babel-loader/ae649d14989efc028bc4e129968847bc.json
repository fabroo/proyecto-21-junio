{"ast":null,"code":"import _objectSpread from \"D:\\\\GitHub\\\\proyecto-21-junio\\\\main\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"D:\\\\GitHub\\\\proyecto-21-junio\\\\main\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\GitHub\\\\proyecto-21-junio\\\\main\\\\client\\\\src\\\\Components\\\\Admin.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from '../Context/AuthContext';\nimport AuthService from '../Services/AuthService';\nimport swal from 'sweetalert';\n\nconst Admin = props => {\n  const _useContext = useContext(AuthContext),\n        user = _useContext.user;\n\n  let _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  let _useState3 = useState({\n    dni: 0,\n    role: \"user\",\n    username: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      elinput = _useState4[0],\n      setElInput = _useState4[1];\n\n  let _useState5 = useState({\n    style: {\n      display: 'none'\n    }\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      add = _useState6[0],\n      setAdd = _useState6[1]; // useEffect(() => {\n  //     showData();\n  // })\n\n\n  const showData = e => {\n    AuthService.getData(user.companyID).then(res => {\n      setContent(res.data.sort(function (a, b) {\n        if (a.username < b.username) {\n          return -1;\n        }\n\n        if (a.username > b.username) {\n          return 1;\n        }\n\n        return 0;\n      }));\n      setAdd({\n        style: {\n          display: 'block'\n        }\n      });\n    }, []);\n  };\n\n  const showRegister = e => {\n    console.log('http://' + String(process.env.LA_IP) + ':5000/user/register');\n    AuthService.getData(user.companyID).then(res => {\n      const all = res.data;\n      const users = [];\n      all.map(user => {\n        if (user.createdAccount) {\n          users.push(user);\n        }\n      });\n      setContent(users.sort(function (a, b) {\n        if (a.username < b.username) {\n          return -1;\n        }\n\n        if (a.username > b.username) {\n          return 1;\n        }\n\n        return 0;\n      }));\n    }, []);\n  };\n\n  const showUnRegister = e => {\n    AuthService.getData(user.companyID).then(res => {\n      const all = res.data;\n      const users = [];\n      all.map(user => {\n        if (!user.createdAccount) {\n          users.push(user);\n        }\n      });\n\n      if (users.length === 0) {\n        swal('No hay sin registrarse');\n      } else {\n        setContent(users.sort(function (a, b) {\n          if (a.username < b.username) {\n            return -1;\n          }\n\n          if (a.username > b.username) {\n            return 1;\n          }\n\n          return 0;\n        }));\n      }\n    }, []);\n  };\n\n  const chau = dni => {\n    swal(\"Estas seguro de ello? No podras volver atrás\", {\n      buttons: {\n        cancel: \"Cancelar\",\n        catch: {\n          text: \"Eliminar\",\n          value: \"borrar\"\n        }\n      }\n    }).then(value => {\n      switch (value) {\n        case \"borrar\":\n          swal(\"Eliminado\", \"El trabajador no forma mas parte de la empresa\", \"success\");\n          AuthService.removeUser(dni).then(res => {\n            AuthService.getData(user.companyID).then(res => {\n              setContent(res.data.sort(function (a, b) {\n                if (a.username < b.username) {\n                  return -1;\n                }\n\n                if (a.username > b.username) {\n                  return 1;\n                }\n\n                return 0;\n              }));\n            }, []);\n          }, []);\n          break;\n\n        default:\n      }\n    });\n  };\n\n  const registrarNuevo = async () => {\n    const dni = elinput.dni;\n    const role = elinput.role;\n    const username = String(dni);\n    await AuthService.registerNew({\n      dni: dni,\n      companyID: user.companyID,\n      role: role,\n      username: username\n    }).then(res => {\n      console.log(res);\n    }, []);\n    showUnRegister();\n  };\n\n  const handleChange = e => {\n    setElInput(_objectSpread({}, elinput, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"arriba\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"m-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \"C\\xF3digo: \\\"\", user.companyID, \"\\\"\"), React.createElement(\"div\", {\n    className: \"botonera\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    style: {\n      margin: 'auto .5rem'\n    },\n    className: \"btn btn-primary\",\n    onClick: showRegister,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"REGISTRADOS\"), React.createElement(\"button\", {\n    style: {\n      margin: 'auto .5rem'\n    },\n    className: \"btn btn-secondary\",\n    onClick: showUnRegister,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"NO REGISTRADOS\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-info\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModalCenter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \" +\")), React.createElement(\"div\", {\n    className: \"modal fade\",\n    id: \"exampleModalCenter\",\n    tabIndex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalCenterTitle\",\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-centered\",\n    role: \"document\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"modal-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"modal-title\",\n    id: \"exampleModalLongTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"New User\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    \"aria-hidden\": \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, \"\\xD7\"))), React.createElement(\"div\", {\n    className: \"modal-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"User's DNI\",\n    required: true,\n    name: \"dni\",\n    className: \"form-control form-control-lg\",\n    value: elinput.dni,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    name: \"role\",\n    className: \"form-control form-control-lg\",\n    onChange: handleChange,\n    value: elinput.role,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"admin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"admin\"), React.createElement(\"option\", {\n    value: \"user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"user\"))), React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Close\"), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: () => registrarNuevo(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"Create\")))))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table table-hover text-center table-responsive-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    className: \"thead-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"username\"), React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"dni\"), React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, \"companyID\"), React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"mail\"), React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"modelo entrendado\"), React.createElement(\"th\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"role\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"bye\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, content ? content.map(user => React.createElement(\"tr\", {\n    key: user._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, user.username == user.dni ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"No registrado\") : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, user.username)), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, user.dni)), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, user.companyID)), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    rel: \"noopener noreferrer\",\n    href: \"https://mail.google.com/mail/u/0/?view=cm&fs=1&to=\" + user.mail + \"&tf=1\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, user.mail))), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \" \", !user.modeloEntrenado ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"no\") : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"si\")), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, user.role)), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \" \", user.role !== \"admin\" ? React.createElement(\"button\", {\n    className: \"btn btn-danger\",\n    onClick: () => chau(user._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"X\") : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"es admin bro\"), \" \"))) : React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, \"No content...\"))))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }));\n};\n\nexport default Admin;","map":{"version":3,"sources":["D:/GitHub/proyecto-21-junio/main/client/src/Components/Admin.js"],"names":["React","useContext","useState","useEffect","AuthContext","AuthService","swal","Admin","props","user","content","setContent","dni","role","username","elinput","setElInput","style","display","add","setAdd","showData","e","getData","companyID","then","res","data","sort","a","b","showRegister","console","log","String","process","env","LA_IP","all","users","map","createdAccount","push","showUnRegister","length","chau","buttons","cancel","catch","text","value","removeUser","registrarNuevo","registerNew","handleChange","target","name","margin","_id","mail","modeloEntrenado"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\r\nimport { AuthContext } from '../Context/AuthContext';\r\nimport AuthService from '../Services/AuthService';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nconst Admin = props => {\r\n\r\n    const { user } = useContext(AuthContext);\r\n    let [content, setContent] = useState(null)\r\n    let [elinput, setElInput] = useState({ dni: 0, role: \"user\", username: \"\" })\r\n\r\n\r\n    let [add, setAdd] = useState({ style: { display: 'none' } })\r\n    // useEffect(() => {\r\n    //     showData();\r\n    // })\r\n    const showData = (e) => {\r\n        AuthService.getData(user.companyID).then(res => {\r\n            setContent(res.data.sort(function (a, b) {\r\n                if (a.username < b.username) { return -1; }\r\n                if (a.username > b.username) { return 1; }\r\n                return 0;\r\n            }));\r\n\r\n            setAdd({ style: { display: 'block' } })\r\n        }, [])\r\n    }\r\n    const showRegister = (e) => {\r\n        console.log('http://'+ String(process.env.LA_IP) + ':5000/user/register');\r\n        AuthService.getData(user.companyID).then(res => {\r\n            const all = res.data;\r\n            const users = [];\r\n\r\n            all.map(user => {\r\n                if (user.createdAccount) {\r\n                    users.push(user)\r\n                }\r\n            })\r\n\r\n            setContent(users.sort(function (a, b) {\r\n                if (a.username < b.username) { return -1; }\r\n                if (a.username > b.username) { return 1; }\r\n                return 0;\r\n            }));\r\n        }, [])\r\n    }\r\n    const showUnRegister = (e) => {\r\n        AuthService.getData(user.companyID).then(res => {\r\n            const all = res.data;\r\n            const users = [];\r\n            \r\n                all.map(user => {\r\n                    if (!user.createdAccount) {\r\n                        users.push(user)\r\n                    }\r\n                })\r\n                if (users.length === 0) {\r\n                    swal('No hay sin registrarse')\r\n                }\r\n                else {\r\n                setContent(users.sort(function (a, b) {\r\n                    if (a.username < b.username) { return -1; }\r\n                    if (a.username > b.username) { return 1; }\r\n                    return 0;\r\n                }));\r\n            }\r\n        }, [])\r\n\r\n    }\r\n    const chau = (dni) => {\r\n        swal(\"Estas seguro de ello? No podras volver atrás\", {\r\n            buttons: {\r\n                cancel: \"Cancelar\",\r\n                catch: {\r\n                    text: \"Eliminar\",\r\n                    value: \"borrar\",\r\n                }\r\n            },\r\n        })\r\n            .then((value) => {\r\n                switch (value) {\r\n\r\n                    case \"borrar\":\r\n                        swal(\"Eliminado\", \"El trabajador no forma mas parte de la empresa\", \"success\");\r\n                        AuthService.removeUser(dni).then(res => {\r\n                            AuthService.getData(user.companyID).then(res => {\r\n                                setContent(res.data.sort(function (a, b) {\r\n                                    if (a.username < b.username) { return -1; }\r\n                                    if (a.username > b.username) { return 1; }\r\n                                    return 0;\r\n                                }));\r\n                            }, [])\r\n                        }, [])\r\n                        break;\r\n\r\n                    default:\r\n\r\n                }\r\n            });\r\n    }\r\n    const registrarNuevo = async () => {\r\n        const dni = elinput.dni;\r\n        const role = elinput.role;\r\n        const username = String(dni);\r\n\r\n        await AuthService.registerNew({ dni: dni, companyID: user.companyID, role: role, username: username }).then(res => {\r\n            console.log(res)\r\n        }, [])\r\n\r\n       showUnRegister(  )\r\n\r\n    }\r\n    const handleChange = (e) => {\r\n        setElInput({ ...elinput, [e.target.name]: e.target.value });\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"container\" >\r\n            <div className=\"arriba\">\r\n                <h3 className=\"m-4\" >Código: \"{user.companyID}\"</h3>\r\n                <div className=\"botonera\" >\r\n                    <button style={{ margin: 'auto .5rem' }} className=\"btn btn-primary\" onClick={showRegister}>REGISTRADOS</button>\r\n                    <button style={{ margin: 'auto .5rem' }} className=\"btn btn-secondary\" onClick={showUnRegister}>NO REGISTRADOS</button>\r\n                    <button type=\"button\" className=\"btn btn-info\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\"> +</button>\r\n\r\n                </div>\r\n                {/* <button className=\"btn btn-info\">+</button> */}\r\n\r\n                <div className=\"modal fade\" id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                    <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                        <div className=\"modal-content\">\r\n                            <div className=\"modal-header\">\r\n                                <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">New User</h5>\r\n                                <button type=\"button\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"modal-body\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"User's DNI\"\r\n                                    required\r\n                                    name=\"dni\"\r\n                                    className=\"form-control form-control-lg\"\r\n                                    value={elinput.dni}\r\n                                    onChange={handleChange} />\r\n                                <br /><br />\r\n                                <select name=\"role\" className=\"form-control form-control-lg\"onChange={handleChange} value={elinput.role}>\r\n                                    <option value=\"admin\">admin</option>\r\n                                    <option value=\"user\">user</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"modal-footer\">\r\n                                <button type=\"button\" className=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                                <button type=\"button\" className=\"btn btn-primary\" onClick={() => registrarNuevo()}>Create</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n\r\n                <table className=\"table table-hover text-center table-responsive-lg\">\r\n                    <thead className=\"thead-dark\">\r\n                        <tr>\r\n                            <th className=\"\">username</th>\r\n                            <th className=\"\">dni</th>\r\n                            <th className=\"\">companyID</th>\r\n                            <th className=\"\">mail</th>\r\n                            <th className=\"\">modelo entrendado</th>\r\n                            <th className=\"\">role</th>\r\n                            <th>bye</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {content ? (\r\n                            content.map(user =>\r\n                                <tr key={user._id}>\r\n\r\n                                    <td>{user.username == user.dni ? (<p>No registrado</p>) : (<p>{user.username}</p>)}</td>\r\n                                    <td ><p>{user.dni}</p></td>\r\n                                    <td><p>{user.companyID}</p></td>\r\n                                    <td><p><a rel=\"noopener noreferrer\" href={\"https://mail.google.com/mail/u/0/?view=cm&fs=1&to=\" + user.mail + \"&tf=1\"} target=\"_blank\">{user.mail}</a></p></td>\r\n                                    <td> {!user.modeloEntrenado ? <p>no</p> : <p>si</p>}</td>\r\n                                    <td><p>{user.role}</p></td>\r\n                                    <td> {user.role !== \"admin\" ? (<button className=\"btn btn-danger\" onClick={() => chau(user._id)}>X</button>) : (<p>es admin bro</p>)} </td>\r\n                                </tr>)\r\n\r\n                        ) : (<tr><td>No content...</td></tr>)}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <br />\r\n            <br />\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default Admin"]},"metadata":{},"sourceType":"module"}